<!DOCTYPE html>
<html>
<head>
    <title>FCM Client</title>
    <meta charset="utf-8" />
    <link rel="manifest" href="manifest.json">
    <script src="https://www.gstatic.com/firebasejs/4.13.0/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.13.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.13.0/firebase-messaging.js"></script>
    <script>
            // Initialize Firebase
            var config = {
              apiKey: "AIzaSyDWWlR06szAtz2SqbOZ2u7saK-PgyG2UPg",
              authDomain: "fcmwithappserver-3e1c8.firebaseapp.com",
              databaseURL: "https://fcmwithappserver-3e1c8.firebaseio.com",
              projectId: "fcmwithappserver-3e1c8",
              storageBucket: "fcmwithappserver-3e1c8.appspot.com",
              messagingSenderId: "974598441747"
            };
            firebase.initializeApp(config);
          </script>
</head>
<body>
    <h1>Введите данные</h1>
    <form action="/subscribe" method="post">
        <label>Заголовок</label><br>
        <input type="text" name="title" /><br><br>
        <label>Описание</label><br>
        <textarea name="description" /></textarea><br><br>
        <input type="submit" value="Отправить" />
    </form>

    <h3>First Push</h3>
    <form id="" name = "sendNotification" action="/send" method="POST">
        <input type="submit" value="Send" />
    </form>
<script src="http://code.jquery.com/jquery-2.2.4.min.js"></script>
<script src="/js/script.js"></script>
<script>
    $("form[name='sendNotification']").submit(function(e){
    e.preventDefault();
    $.ajax({
        type:"POST",
        url:"https://fcm.googleapis.com/fcm/send",
        dataType:"json",
        contentType:"application/json",
        headers:{
            "Authorization": "key=  AAAA4uqYCxM:APA91bF7LEuHwG5-2obu_GJsJbMx0vtl_y-1ILsFGT8Isjpa1MQNykQ7YtICMKvDvzezzVnSbiB2POYqVJyqC9IZ7TDVCfXrniNnei8N3LcFzpsI2wrafPB2lHSUB9a0kqznK-E9GUdU"
        },
        data:JSON.stringify({
            "to":"dq475XSZFhI:APA91bEfhtXgFMUn0ZD8UUrwOBZmaUb1e85Zr3pAf8-yH7_OoNhT0-30nR0acm0HUUiZPAWmQ1DWXoi77TLbeXORwB5eoq8BHIp2SchIEVSZiGHDTJ2i_uDvcJYcw2ldd5UTr4mThacw",
            "notification": {
                "title": "FCM Message",
                "body": "This is a Firebase Cloud Messaging Topic Message!",
            }
        }),
        success:function(data){
            console.log(data);
        },
        error: function(err){
            console.log(err);
        }
    });
});


messaging.onMessage(function(payload){
    console.log('onMessage', payload);
});
</script>
</body>
<html>